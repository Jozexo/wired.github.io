---
import type { Project } from "../data/projects";
interface Props { project: Project }
const { project } = Astro.props as Props;
---
<a href={project.href} class="node block project-card">
  <div class="project-card__media" aria-hidden={project.image ? "false" : "true"}>
    {project.image ? (
      <img src={project.image} alt={`${project.title} preview`} loading="lazy" />
    ) : (
      <div class="project-card__placeholder">
        <iconify-icon icon="lucide:image" width="28" />
      </div>
    )}
  </div>
  <div class="project-card__body">
    <div class="flex items-center justify-between gap-2 mb-2">
      <h3 class="font-semibold text-[var(--fg)]">{project.title}</h3>
      <svg width="18" height="18" viewBox="0 0 24 24" fill="none" stroke="currentColor" class="opacity-70"><path d="M7 17L17 7"/><path d="M7 7h10v10"/></svg>
    </div>
    <p class="text-sm text-[var(--muted)] mb-3">{project.description}</p>
    <div class="flex flex-wrap gap-2">
      {project.tags.map((t: string) => (
        <span class="text-xs px-2 py-1 rounded border border-[var(--grid)]/80 text-[var(--muted)]">{t}</span>
      ))}
    </div>
  </div>
</a>
<style>
  .project-card { display: grid; grid-template-columns: 160px 1fr; gap: 14px; padding: 14px; }
  .project-card__media { border-radius: 8px; overflow: hidden; border: 1px solid var(--grid); background: color-mix(in oklab, var(--card) 86%, black); align-self: start; }
  .project-card__media img { display: block; width: 100%; height: 100%; object-fit: cover; aspect-ratio: 16/10; }
  .project-card__placeholder { height: 100%; min-height: 110px; display:flex; align-items:center; justify-content:center; color: var(--muted); }
  .project-card__body { min-width: 0; }
  @media (max-width: 720px) {
    .project-card { grid-template-columns: 1fr; }
    .project-card__media { order: -1; }
  }
</style>
